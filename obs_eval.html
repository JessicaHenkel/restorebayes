<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="obs_eval_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="obs_eval_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="obs_eval_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="obs_eval_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="obs_eval_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="obs_eval_files/navigation-1.1/tabsets.js"></script>
<link href="obs_eval_files/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="obs_eval_files/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">




</div>


<div id="observed-restoration-projects" class="section level1">
<h1>Observed restoration projects</h1>
<div id="summary-plots" class="section level2">
<h2>Summary plots</h2>
<pre class="r"><code>ext &lt;- make_bbox(reststat$lon, reststat$lat, f = 0.1)
map &lt;- get_stamenmap(ext, zoom = 10, maptype = &quot;toner-lite&quot;)

# restoration project grouping column
resgrp &lt;- &#39;top&#39;
restall &lt;- left_join(restdat, reststat, by = &#39;id&#39;)
names(restall)[names(restall) %in% resgrp] &lt;- &#39;Restoration\ngroup&#39;

# base map
pbase &lt;- ggmap(map) +
  theme_bw() +
  theme(
    axis.title.x = element_blank(),
    axis.title.y = element_blank()
  )

# map by restoration type
pbase +
  geom_point(data = restall, aes(x = lon, y = lat, fill = `Restoration\ngroup`), size = 4, pch = 21)</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-1-1.png" /><!-- --></p>
<pre class="r"><code># map by restoration year
pbase +
  geom_point(data = restall, aes(x = lon, y = lat, fill = factor(date)), size = 4, pch = 21)</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-1-2.png" /><!-- --></p>
<pre class="r"><code># barplot of counts by year
toplo &lt;- restall %&gt;% 
  group_by(date)
ggplot(restall, aes(x = factor(date))) + 
  geom_bar() + 
  coord_flip() + 
  theme_bw() + 
  theme(
    axis.title.y = element_blank()
  ) +
  scale_y_discrete(expand = c(0, 0))</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-1-3.png" /><!-- --></p>
</div>
<div id="distance-to-restoration-sites" class="section level2 tabset">
<h2>Distance to restoration sites</h2>
<pre class="r"><code>wqmtch &lt;- get_clo(restdat, reststat, wqstat, resgrp = &#39;top&#39;, mtch = mtch)
save(wqmtch, file = &#39;data/wqmtch.RData&#39;, compress = &#39;xz&#39;)

head(wqmtch)</code></pre>
<pre><code>## # A tibble: 6 x 5
##    stat resgrp   rnk    id     dist
##   &lt;int&gt;  &lt;chr&gt; &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1    47    hab     1  dLmu 2861.746
## 2    47    hab     2  DyAP 2971.000
## 3    47    hab     3  P2gv 4526.348
## 4    47    hab     4  Wxg6 4526.348
## 5    47    hab     5  ruky 4526.348
## 6    47    hab     6  cTzf 4526.348</code></pre>
<div id="closest" class="section level3">
<h3>Closest</h3>
<pre class="r"><code>## 
# plots

# combine lat/lon for the plot
toplo &lt;- wqmtch %&gt;% 
  left_join(wqstat, by = &#39;stat&#39;) %&gt;% 
  left_join(reststat, by = &#39;id&#39;) %&gt;% 
  rename(
    `Restoration\ngroup` = resgrp,
    `Distance (dd)` = dist
  )
    
# restoration project grouping column
resgrp &lt;- &#39;top&#39;
restall &lt;- left_join(restdat, reststat, by = &#39;id&#39;)
names(restall)[names(restall) %in% resgrp] &lt;- &#39;Restoration\ngroup&#39;

# extent
ext &lt;- make_bbox(wqstat$lon, wqstat$lat, f = 0.1)
map &lt;- get_stamenmap(ext, zoom = 12, maptype = &quot;toner-lite&quot;)

# base map
pbase &lt;- ggmap(map) +
  theme_bw() +
  theme(
    axis.title.x = element_blank(),
    axis.title.y = element_blank()
  ) +
  geom_point(data = restall, aes(x = lon, y = lat, fill = `Restoration\ngroup`), size = 4, pch = 21) +
  geom_point(data = wqstat, aes(x = lon, y = lat), size = 2)

# closest
toplo1 &lt;- filter(toplo, rnk %in% 1)

pbase + 
  geom_segment(data = toplo1, aes(x = lon.x, y = lat.x, xend = lon.y, yend = lat.y, alpha = -`Distance (dd)`, linetype = `Restoration\ngroup`), size = 1)</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-3-1.png" /><!-- --></p>
</div>
<div id="closest-twenty-percent" class="section level3">
<h3>Closest twenty percent</h3>
<pre class="r"><code># closest five percent
fvper &lt;- max(toplo$rnk) %&gt;% 
  `*`(0.2) %&gt;% 
  ceiling
toplo2 &lt;- filter(toplo, rnk %in% c(1:fvper))

pbase + 
  geom_segment(data = toplo2, aes(x = lon.x, y = lat.x, xend = lon.y, yend = lat.y, alpha = -`Distance (dd)`, linetype = `Restoration\ngroup`), size = 1)</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-4-1.png" /><!-- --></p>
</div>
<div id="closest-all-combinations" class="section level3">
<h3>Closest all combinations</h3>
<pre class="r"><code># closest all combo
toplo3 &lt;- toplo

pbase + 
  geom_segment(data = toplo3, aes(x = lon.x, y = lat.x, xend = lon.y, yend = lat.y, alpha = -`Distance (dd)`, linetype = `Restoration\ngroup`), size = 1)</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-5-1.png" /><!-- --></p>
</div>
</div>
<div id="summarizing-effects-of-restoration-projects" class="section level2">
<h2>Summarizing effects of restoration projects</h2>
<p>Get weighted average of project type, treatment (before, after) of salinity for all wq station, restoration site combinations.</p>
<pre class="r"><code>salchgout &lt;- get_chg(wqdat, wqmtch, statdat, restdat, wqvar = &#39;sal&#39;, yrdf = yrdf, chgout = TRUE)
salchg &lt;- get_chg(wqdat, wqmtch, statdat, restdat, wqvar = &#39;sal&#39;, yrdf = yrdf)
save(salchgout, file = &#39;data/salchgout.RData&#39;)
save(salchg, file = &#39;data/salchg.RData&#39;)
head(salchgout)</code></pre>
<pre><code>## # A tibble: 6 x 3
## # Groups:   stat [2]
##    stat     cmb     cval
##   &lt;int&gt;   &lt;chr&gt;    &lt;dbl&gt;
## 1     6 hab_aft 24.67069
## 2     6 hab_bef 24.90016
## 3     6 wtr_aft 25.27052
## 4     6 wtr_bef 24.92134
## 5     7 hab_aft 25.92751
## 6     7 hab_bef 25.25877</code></pre>
<pre class="r"><code>head(salchg)</code></pre>
<pre><code>## # A tibble: 6 x 4
##    stat     hab     wtr     cval
##   &lt;int&gt;  &lt;fctr&gt;  &lt;fctr&gt;    &lt;dbl&gt;
## 1     6 hab_aft wtr_aft 24.97061
## 2     6 hab_aft wtr_bef 24.79602
## 3     6 hab_bef wtr_aft 25.08534
## 4     6 hab_bef wtr_bef 24.91075
## 5     7 hab_aft wtr_aft 25.96783
## 6     7 hab_aft wtr_bef 25.43867</code></pre>
<p>Get conditional probability distributions for the restoration type, treatment effects, <strong>salinity</strong> as first child node in network.</p>
<pre class="r"><code>wqcdt &lt;- get_cdt(salchg, &#39;hab&#39;, &#39;wtr&#39;)
head(wqcdt)</code></pre>
<pre><code>## # A tibble: 4 x 5
##       hab     wtr              data       crv                    prd
##    &lt;fctr&gt;  &lt;fctr&gt;            &lt;list&gt;    &lt;list&gt;                 &lt;list&gt;
## 1 hab_aft wtr_aft &lt;tibble [45 x 2]&gt; &lt;dbl [2]&gt; &lt;data.frame [100 x 3]&gt;
## 2 hab_aft wtr_bef &lt;tibble [45 x 2]&gt; &lt;dbl [2]&gt; &lt;data.frame [100 x 3]&gt;
## 3 hab_bef wtr_aft &lt;tibble [45 x 2]&gt; &lt;dbl [2]&gt; &lt;data.frame [100 x 3]&gt;
## 4 hab_bef wtr_bef &lt;tibble [45 x 2]&gt; &lt;dbl [2]&gt; &lt;data.frame [100 x 3]&gt;</code></pre>
<p>Discretization of salinity conditional probability distributions:</p>
<pre class="r"><code>salbrk &lt;- get_brk(wqcdt, qts = c(0.33, 0.66), &#39;hab&#39;, &#39;wtr&#39;)
salbrk</code></pre>
<pre><code>## # A tibble: 8 x 5
##       hab     wtr      qts       brk  clev
##    &lt;fctr&gt;  &lt;fctr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 hab_aft wtr_aft 26.63419 0.4169601     1
## 2 hab_aft wtr_aft 30.21228 0.8689749     2
## 3 hab_aft wtr_bef 26.97154 0.4543617     1
## 4 hab_aft wtr_bef 30.32224 0.8864751     2
## 5 hab_bef wtr_aft 25.89163 0.3649775     1
## 6 hab_bef wtr_aft 29.74102 0.8589130     2
## 7 hab_bef wtr_bef 26.12722 0.3903150     1
## 8 hab_bef wtr_bef 29.79934 0.8738420     2</code></pre>
<p>A plot showing the breaks:</p>
<pre class="r"><code>toplo &lt;- dplyr::select(wqcdt, -data, -crv) %&gt;% 
  unnest
ggplot(toplo, aes(x = cval, y = cumest)) + 
  geom_line() + 
  geom_segment(data = salbrk, aes(x = qts, y = 0, xend = qts, yend = brk)) +
  geom_segment(data = salbrk, aes(x = min(toplo$cval), y = brk, xend = qts, yend = brk)) +
  facet_grid(hab ~ wtr) +
  theme_bw()</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-9-1.png" /><!-- --></p>
<p>Get conditional probability distributions for the restoration type, treatment effects, salinity levels, <strong>chlorophyll</strong> as second child node in network.</p>
<pre class="r"><code># get chlorophyll changes
chlchgout &lt;- get_chg(wqdat, wqmtch, statdat, restdat, wqvar = &#39;chla&#39;, yrdf = yrdf, chgout = TRUE)
chlchg &lt;- get_chg(wqdat, wqmtch, statdat, restdat, wqvar = &#39;chla&#39;, yrdf = yrdf)
save(chlchgout, file = &#39;data/chlchgout.RData&#39;)
save(chlchg, file = &#39;data/chlchg.RData&#39;)

# merge with salinity, bet salinity levels
salbrk &lt;- salbrk %&gt;% 
  group_by(hab, wtr) %&gt;% 
  nest(.key = &#39;levs&#39;)
allchg &lt;- full_join(chlchg, salchg, by = c(&#39;hab&#39;, &#39;wtr&#39;, &#39;stat&#39;)) %&gt;% 
  rename(
    salev = cval.y, 
    cval = cval.x
  ) %&gt;% 
  group_by(hab, wtr) %&gt;% 
  nest %&gt;% 
  left_join(salbrk, by = c(&#39;hab&#39;, &#39;wtr&#39;)) %&gt;% 
  mutate(
    sallev = pmap(list(data, levs), function(data, levs){
      # browser()
      out &lt;- data %&gt;% 
        mutate(
          saval = salev,
          salev = cut(salev, breaks = c(-Inf, levs$qts, Inf), labels = c(&#39;lo&#39;, &#39;md&#39;, &#39;hi&#39;)),
          salev = as.character(salev)
        )
      
      return(out)
      
    })
  ) %&gt;% 
  dplyr::select(-data, -levs) %&gt;% 
  unnest
salchg &lt;- dplyr::select(allchg, stat, hab, wtr, salev, saval)
save(salchg, file = &#39;data/salchg.RData&#39;, compress = &#39;xz&#39;)

chlcdt &lt;- get_cdt(allchg, &#39;hab&#39;, &#39;wtr&#39;, &#39;salev&#39;)
save(chlcdt, file = &#39;data/chlcdt.RData&#39;, compress = &#39;xz&#39;)

chlbrk &lt;- get_brk(chlcdt, c(0.33, 0.66), &#39;hab&#39;, &#39;wtr&#39;, &#39;salev&#39;)
chlbrk %&gt;% 
  print(n = nrow(.))</code></pre>
<pre><code>## # A tibble: 24 x 6
##        hab     wtr salev       qts       brk  clev
##     &lt;fctr&gt;  &lt;fctr&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1 hab_aft wtr_aft    lo 10.781653 0.5708955     1
##  2 hab_aft wtr_aft    lo 15.256575 0.9569160     2
##  3 hab_aft wtr_aft    md  5.890574 0.3221651     1
##  4 hab_aft wtr_aft    md  7.436869 0.8264526     2
##  5 hab_aft wtr_aft    hi  3.652376 0.2036516     1
##  6 hab_aft wtr_aft    hi  4.204048 0.6773383     2
##  7 hab_aft wtr_bef    lo  9.683807 0.5140944     1
##  8 hab_aft wtr_bef    lo 13.506126 0.9259794     2
##  9 hab_aft wtr_bef    md  4.826403 0.2636494     1
## 10 hab_aft wtr_bef    md  5.757980 0.6830875     2
## 11 hab_aft wtr_bef    hi  3.608659 0.2725892     1
## 12 hab_aft wtr_bef    hi  4.270781 0.7370509     2
## 13 hab_bef wtr_aft    lo 10.880113 0.4210896     1
## 14 hab_bef wtr_aft    lo 14.057895 0.8697229     2
## 15 hab_bef wtr_aft    md  6.873076 0.3816564     1
## 16 hab_bef wtr_aft    md  9.055613 0.8655731     2
## 17 hab_bef wtr_aft    hi  3.672462 0.2926042     1
## 18 hab_bef wtr_aft    hi  4.717372 0.7371243     2
## 19 hab_bef wtr_bef    lo  9.760665 0.3783987     1
## 20 hab_bef wtr_bef    lo 13.466942 0.8476858     2
## 21 hab_bef wtr_bef    md  5.613609 0.2562567     1
## 22 hab_bef wtr_bef    md  6.986132 0.7812274     2
## 23 hab_bef wtr_bef    hi  3.365774 0.1936992     1
## 24 hab_bef wtr_bef    hi  4.258161 0.6063329     2</code></pre>
<p>Final combinations long format:</p>
<pre class="r"><code>chlbar &lt;- chlbrk %&gt;% 
  group_by(hab, wtr, salev) %&gt;% 
  nest %&gt;% 
  mutate(
    data = map(data, function(x){
      
      brk &lt;- x$brk
      out &lt;- data.frame(
        lo = brk[1], md = brk[2] - brk[1], hi = 1 - brk[2]
      )
      
      return(out)
      
    })
  ) %&gt;% 
  unnest %&gt;% 
  gather(&#39;chllev&#39;, &#39;chlval&#39;, lo:hi) %&gt;% 
  mutate(
    salev = factor(salev, levels = c(&#39;lo&#39;, &#39;md&#39;, &#39;hi&#39;)),
    chllev = factor(chllev, levels = c(&#39;lo&#39;, &#39;md&#39;, &#39;hi&#39;))
  )
save(chlbar, file = &#39;data/chlbar.RData&#39;, compress = &#39;xz&#39;)

chlbar %&gt;% 
  print(n = nrow(.))</code></pre>
<pre><code>## # A tibble: 36 x 5
##        hab     wtr  salev chllev     chlval
##     &lt;fctr&gt;  &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt;      &lt;dbl&gt;
##  1 hab_aft wtr_aft     lo     lo 0.57089552
##  2 hab_aft wtr_aft     md     lo 0.32216515
##  3 hab_aft wtr_aft     hi     lo 0.20365158
##  4 hab_aft wtr_bef     lo     lo 0.51409437
##  5 hab_aft wtr_bef     md     lo 0.26364945
##  6 hab_aft wtr_bef     hi     lo 0.27258924
##  7 hab_bef wtr_aft     lo     lo 0.42108961
##  8 hab_bef wtr_aft     md     lo 0.38165644
##  9 hab_bef wtr_aft     hi     lo 0.29260416
## 10 hab_bef wtr_bef     lo     lo 0.37839875
## 11 hab_bef wtr_bef     md     lo 0.25625674
## 12 hab_bef wtr_bef     hi     lo 0.19369916
## 13 hab_aft wtr_aft     lo     md 0.38602049
## 14 hab_aft wtr_aft     md     md 0.50428742
## 15 hab_aft wtr_aft     hi     md 0.47368675
## 16 hab_aft wtr_bef     lo     md 0.41188504
## 17 hab_aft wtr_bef     md     md 0.41943802
## 18 hab_aft wtr_bef     hi     md 0.46446165
## 19 hab_bef wtr_aft     lo     md 0.44863327
## 20 hab_bef wtr_aft     md     md 0.48391665
## 21 hab_bef wtr_aft     hi     md 0.44452013
## 22 hab_bef wtr_bef     lo     md 0.46928701
## 23 hab_bef wtr_bef     md     md 0.52497063
## 24 hab_bef wtr_bef     hi     md 0.41263378
## 25 hab_aft wtr_aft     lo     hi 0.04308399
## 26 hab_aft wtr_aft     md     hi 0.17354743
## 27 hab_aft wtr_aft     hi     hi 0.32266167
## 28 hab_aft wtr_bef     lo     hi 0.07402058
## 29 hab_aft wtr_bef     md     hi 0.31691253
## 30 hab_aft wtr_bef     hi     hi 0.26294911
## 31 hab_bef wtr_aft     lo     hi 0.13027712
## 32 hab_bef wtr_aft     md     hi 0.13442692
## 33 hab_bef wtr_aft     hi     hi 0.26287572
## 34 hab_bef wtr_bef     lo     hi 0.15231424
## 35 hab_bef wtr_bef     md     hi 0.21877263
## 36 hab_bef wtr_bef     hi     hi 0.39366706</code></pre>
<p>Discretesize chlorophyll data, all stations:</p>
<pre class="r"><code># discretize all chl data by breaks 
chlbrk &lt;- chlbrk %&gt;% 
  group_by(hab, wtr, salev) %&gt;% 
  nest(.key = &#39;levs&#39;)
allchg &lt;- allchg %&gt;% 
  group_by(hab, wtr, salev) %&gt;% 
  nest %&gt;% 
  full_join(chlbrk, by = c(&#39;hab&#39;, &#39;wtr&#39;, &#39;salev&#39;)) %&gt;% 
  mutate(
    lev = pmap(list(data, levs), function(data, levs){
      
      out &lt;- data %&gt;% 
        mutate(
          lev = cut(cval, breaks = c(-Inf, levs$qts, Inf), labels = c(&#39;lo&#39;, &#39;md&#39;, &#39;hi&#39;)),
          lev = as.character(lev)
        )
      browser()
      return(out)
      
    })
  ) %&gt;% 
  dplyr::select(-data, -levs) %&gt;% 
  unnest %&gt;% 
  rename(
    chlev = lev, 
    chval = cval
    )</code></pre>
<pre><code>## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)
## Called from: .f(.l[[c(1L, i)]], .l[[c(2L, i)]], ...)
## debug at &lt;text&gt;#18: return(out)</code></pre>
<pre class="r"><code>save(allchg, file = &#39;data/allchg.RData&#39;, compress = &#39;xz&#39;)</code></pre>
<p>A bar plot of splits:</p>
<pre class="r"><code>ggplot(chlbar, aes(x = chllev, y = chlval, group = salev, fill = salev)) +
  geom_bar(stat = &#39;identity&#39;, position = &#39;dodge&#39;) +
  facet_grid(hab ~ wtr) +
  theme_bw()</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-13-1.png" /><!-- --></p>
<p>A plot showing the breaks:</p>
<pre class="r"><code>toplo &lt;- dplyr::select(chlcdt, -data, -crv) %&gt;% 
  unnest %&gt;%
  mutate(
    salev = factor(salev, levels = c(&#39;lo&#39;, &#39;md&#39;, &#39;hi&#39;))
  )
chlbrk &lt;- unnest(chlbrk)
ggplot(toplo, aes(x = cval, y = cumest, group = salev, colour = salev)) + 
  geom_line() + 
  geom_segment(data = chlbrk, aes(x = qts, y = 0, xend = qts, yend = brk)) +
  geom_segment(data = chlbrk, aes(x = min(toplo$cval), y = brk, xend = qts, yend = brk)) +
  facet_grid(hab ~ wtr, scales = &#39;free_x&#39;) +
  theme_bw()</code></pre>
<p><img src="obs_eval_files/figure-html/unnamed-chunk-14-1.png" /><!-- --></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
